(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7288:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=e.length-1;return e.slice(0,i).reduce((e,t,r)=>e+t+n[r],"")+e[i]}n.d(t,{Z:function(){return r}})},8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(441)}])},9759:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(5893),i=n(1664),o=n.n(i),u=n(9008),s=n.n(u);function l(e){let{movies:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{children:(0,r.jsxs)("title",{children:[t.length," Movies"]})}),(0,r.jsx)("main",{className:"container mx-auto grid grid-cols-1 divide-y divide-blue-100",children:t.map(e=>(0,r.jsx)(o(),{href:e.slug.current,className:"p-4 hover:bg-blue-50",children:(0,r.jsx)("h2",{children:null==e?void 0:e.title})},e._id))})]})}},441:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return d},default:function(){return h}});var r=n(7297),i=n(5893),o=n(7294),u=n(7288),s=n(9759),l=n(386);function c(){let e=(0,r.Z)(['*[_type == "movie" && defined(slug.current)]{\n  _id,\n  title, \n  slug\n}']);return c=function(){return e},e}let a=(0,o.lazy)(()=>n.e(493).then(n.bind(n,6493))),f=(0,u.Z)(c());var d=!0;function h(e){let{preview:t,data:n}=e;return t?(0,i.jsx)(l.Dz,{fallback:"Loading...",children:(0,i.jsx)(a,{query:f})}):(0,i.jsx)(s.Z,{movies:n})}},386:function(e,t,n){"use strict";n.d(t,{Dz:function(){return h},R2:function(){return d}});var r=n(7294);let i=[],o=(e,t,n)=>(function(e,t,n=!1,r={}){for(let e of i)if(function(e,t,n=(e,t)=>e===t){if(e===t)return!0;if(!e||!t)return!1;let r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}(t,e.keys,e.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(e,"error"))throw e.error;if(Object.prototype.hasOwnProperty.call(e,"response"))return e.response;if(!n)throw e.promise}let o={keys:t,equal:r.equal,promise:e(...t).then(e=>o.response=e).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{let e=i.indexOf(o);-1!==e&&i.splice(e,1)},r.lifespan)}).catch(e=>o.error=e)};if(i.push(o),!n)throw o.promise})(e,t,!1,n);var u=n(5893);let s=async(e,t)=>{let n=await fetch("https://".concat(e,".api.sanity.io/v1/users/me"),{credentials:"include",headers:t?{Authorization:"Bearer ".concat(t)}:void 0}),r=await n.json();return Boolean(null==r?void 0:r.id)},l=async()=>{let e=await n.e(595).then(n.bind(n,6595)),{groqStore:t}="default"in e?e.default:e;return t},c=async()=>{let e=await n.e(699).then(n.t.bind(n,3699,19)),t="default"in e?e.default:e;return t},a=e=>{let t,{projectId:n,dataset:i,documentLimit:o=3e3,subscriptionThrottleMs:u=10,overlayDrafts:s=!0,listen:l=!0,importEventSourcePolyfill:c,importGroqStore:a,preload:f,onPublicAccessOnly:d,checkAuth:h,includeTypes:p}=e;return n?function(e,v,w,y){if("undefined"==typeof document)throw Error("Calling usePreview outside a browser environment isn't supported. Ensure the component using the hook is only rendering on the client. For example by wrapping it in PreviewSuspense.");if(!e&&null!==e)throw Error("No `token` given to usePreview hook, if this is intentional then set it to `null`");let[b]=(0,r.useState)(()=>y),g=function(e){let t=(0,r.useMemo)(()=>JSON.stringify(e||{}),[e]);return(0,r.useMemo)(()=>JSON.parse(t),[t])}(w);if(!t){if(d){let t=h(n,e);t||d()}let r=a();t=r({projectId:n,dataset:i,documentLimit:o,subscriptionThrottleMs:u,includeTypes:p,token:null===e?void 0:e,EventSource:null===e?void 0:c(),listen:l,overlayDrafts:s})}let m=null!=b?b:f(t,v,g),k=(0,r.useMemo)(()=>{let e=m;return{getServerSnapshot:void 0===b?void 0:()=>b,getSnapshot:()=>e,subscribe:n=>{let r;let i=e=>{throw console.error("Error thrown in the usePreviewHook subscription",e),e};return l?r=t.subscribe(v,void 0===g?{}:g,(t,r)=>{t?i(t):(e=r,n())}):t.query(v,g).then(t=>{e=t,n()}).catch(i),()=>null==r?void 0:r.unsubscribe()}}},[m,g,v,b]);return(0,r.useEffect)(()=>{let e=()=>{t.close()};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[]),(0,r.useSyncExternalStore)(k.subscribe,k.getSnapshot,k.getServerSnapshot)}:(console.warn("No projectId set for createPreviewHook, returning dummy hook"),function(){return console.warn("The hook returned by createPreviewHook is a dummy as there is no projectId set, returning null"),null})},f=(e,t,n)=>e.query(t,n),d=e=>a({...e,importEventSourcePolyfill:()=>o(()=>c(),["@sanity/preview-kit","@sanity/eventsource/browser"]),importGroqStore:()=>o(()=>l(),["@sanity/preview-kit","@sanity/groq-store"]),preload:(e,t,n)=>o(()=>f(e,t,n),["@sanity/preview-kit","preload",t,JSON.stringify(null!=n?n:{})]),checkAuth:(e,t)=>o(()=>s(e,t),["@sanity/preview-kit","checkAuth",e,t])});function h(e){let{children:t,fallback:n}=e,[i,o]=(0,r.useReducer)(()=>!0,!1);return(0,r.useEffect)(o,[o]),(0,u.jsx)(r.Suspense,{fallback:n,children:i?t:n})}},7297:function(e,t,n){"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[664,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);